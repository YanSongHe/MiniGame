require=function t(e,i,s){function c(o,n){if(!i[o]){if(!e[o]){var a="function"==typeof require&&require;if(!n&&a)return a(o,!0);if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return c(i||t)},u,u.exports,t,e,i,s)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<s.length;o++)c(s[o]);return c}({AGAudio:[function(t,e,i){"use strict";cc._RF.push(e,"bca7bTIe/pFval1bu53XR9Z","AGAudio");var s=1,c=1,r=cc.Class({ctor:function(){this._isStop=!1,this.audio=null,this.musicId=null,this.effectId=null,cc.sys.__audioSupport&&cc.sys.__audioSupport.context&&(this._context=cc.sys.__audioSupport.context,"createBufferSource"in this._context&&(this.audio=this._context.createBufferSource())),cc.game.on(cc.game.EVENT_HIDE,this.onGameHide,this),cc.game.on(cc.game.EVENT_SHOW,this.onGameShow,this)},onGameHide:function(){this._isStop=!0},onGameShow:function(){this._isStop=!1},playMusic:function(t,e){return this.stopMusic(),t=cc.url.raw("resources/"+t),this.musicId=cc.audioEngine.play(t,e,s),this.musicId},playEffect:function(t){if((!this.audio||this.audio.context.state&&"suspended"!==this.audio.context.state||0!==this._context.currentTime)&&(this.audio=null,!this._isStop))return t=cc.url.raw("resources/"+t),this.effectId=cc.audioEngine.play(t,!1,c),this.effectId},setMusicVolume:function(t){s=t,null!=this.musicId&&cc.audioEngine.setVolume(this.musicId,t)},getMusicVolum:function(){return s},setEffectsVolume:function(t){c=t,null!=this.effectId&&cc.audioEngine.setVolume(this.effectId,t)},getEffectsVolum:function(){return c},stopMusic:function(){null!=this.musicId&&cc.audioEngine.stop(this.musicId),this.musicId=null},reset:function(){this.stopMusic()}});e.exports=r,cc._RF.pop()},{}],AddScoreEffect:[function(t,e,i){"use strict";cc._RF.push(e,"8d71cMBdEpDibaQ1nnfh3Yi","AddScoreEffect");var s=t("res"),c=t("UiTools"),r=new(cc.Class({init:function(){this.showingEffectList=[],this.pool=new cc.NodePool},getNode:function(){return this.pool.size()>0?this.pool.get():c.createPrefab(s.nodeAddScore_Pre)},putNode:function(t){null!=t.parent&&(t.removeFromParent(),t.getComponent(cc.Animation).stop(),this.pool.put(t),this.showingEffectList.removeElement(t))},showEffect:function(t,e,i){var s=this.getNode();s.parent=t,s.x=e.x,s.y=e.y,s.scale=2;var c=s.getChildByName("tfAddScore");c.getComponent(cc.Label).string=i,Math.abs(e.x)+c.width>t.width/2&&(e.x>0?s.x=t.width/2-c.width:s.x=-(t.width/2-c.width));var r=s.getComponent(cc.Animation);r.stop(),r.play("addScore"),this.showingEffectList.push(s),setTimeout(this.putNode.bind(this,s),1e3)},stopAllEffect:function(){cc.each(this.showingEffectList,function(t){t&&this.putNode(t)},this),this.showingEffectList=[]}}));r.init(),e.exports=r,cc._RF.pop()},{UiTools:"UiTools",res:"res"}],EntryScene:[function(t,e,i){"use strict";cc._RF.push(e,"8fa87+IDK9BsoNH7W0+jkoK","EntryScene"),cc.Class({extends:cc.Component,properties:{barLoading:cc.Node,imgLoadingLight:cc.Node,progressBar:{default:null,type:cc.ProgressBar}},onLoad:function(){this.initUI(),this.startLoadRes()},initUI:function(){this.updateProgress(0)},startLoadRes:function(){t("resMgr").load(t("resLists"),this.onResLoadProgress.bind(this),this.onCompleted.bind(this),this.onTimeOut.bind(this))},onResLoadProgress:function(t){this.updateProgress(.9*t)},updateProgress:function(t){this.imgLoadingLight.x=this.barLoading.width-5,this.progressBar.progress=t},onCompleted:function(){this.updateProgress(1),this.startGame()},onTimeOut:function(){},startGame:function(){cc.director.loadScene("game")}}),cc._RF.pop()},{resLists:"resLists",resMgr:"resMgr"}],NodeTools:[function(t,e,i){"use strict";cc._RF.push(e,"ec43dOY6BxMBKMziETHsYZb","NodeTools");var s={getComponent:function(t,e){return t?t.getComponent(e):(console.error("getComponent is error: node is null"),null)},getNodeByName:function(t,e){var i=cc.find(t,e);return i||console.error("getNodeByName is error: nodeName "+t),i},getComponentByType:function(t,e,i){var s=this.getNodeByName(t,i);return this.getComponent(s,e)},getWidget:function(t,e){return this.getComponentByType(t,cc.Widget,e)},getButton:function(t,e){return this.getComponentByType(t,cc.Button,e)},getLabel:function(t,e){return this.getComponentByType(t,cc.Label,e)},getRichText:function(t,e){return this.getComponentByType(t,cc.RichText,e)},getSprite:function(t,e){return this.getComponentByType(t,cc.Sprite,e)},getEditBox:function(t,e){return this.getComponentByType(t,cc.EditBox,e)},addClickListener:function(t,e,i,s){var c=this.getNodeByName(t,s);c&&c.on("click",e,i)},removeClickListener:function(t,e,i,s){var c=this.getNodeByName(t,s);c&&c.off("click",e,i)},addNodeClickListener:function(t,e,i){t&&t.on("click",e,i)},removeNodeClickListener:function(t,e,i){t&&t.off("click",e,i)},setButtonTitle:function(t,e){cc.js.isString(t)&&null==(t=this.getNodeByName(t))?console.log("#############setButtonTitle:no button:"+t):this.getLabel("Label",t).string=e},traversalNode:function(t,e){e(t);for(var i=0;i<t.children.length;++i)this.traversalNode(t.children[i],e)}};e.exports=s,cc._RF.pop()},{}],ParticleStarPool:[function(t,e,i){"use strict";cc._RF.push(e,"5d631l3CydDf7nnnyd6XzCP","ParticleStarPool");var s=t("UiTools"),c=t("res"),r={0:cc.color(255,0,255),1:cc.color(255,0,0),2:cc.color(235,255,0),3:cc.color(0,191,255),4:cc.color(0,255,0)},o=new(cc.Class({init:function(){this.pool=new cc.NodePool},getParticleStar:function(t){var e=null,i=(e=this.pool.size()>0?this.pool.get():s.createPrefab(c.nodeParticleStar_Pre)).getChildByName("particleStar").getComponent(cc.ParticleSystem);return i.resetSystem(),i.startColor=r[t],i.endColor=r[t],e},putParticleStar:function(t){t.getChildByName("particleStar").getComponent(cc.ParticleSystem).stopSystem(),this.pool.put(t)}}));o.init(),e.exports=o,cc._RF.pop()},{UiTools:"UiTools",res:"res"}],PraiseEffect:[function(t,e,i){"use strict";cc._RF.push(e,"9d983pLy+xPn7Cj48jn4kc6","PraiseEffect");var s=t("res"),c=t("UiTools");cc.Class({extends:cc.Component,properties:{anim:cc.Animation},playEffect:function(t){this.node.active=!0;var e="effect_praise_"+t;this.node.getChildByName("imePraise").getComponent(cc.Sprite).spriteFrame=c.getSpriteFrame(e,s.effect_atlas),this.anim.stop(),this.anim.play("praise")},playSound:function(){},setPlayEndCallback:function(t){this.endCB=t},playEnd:function(){this.anim.stop(),this.node.active=!1;var t=this.endCB;this.endCB=null,null!=t&&t()}}),cc._RF.pop()},{UiTools:"UiTools",res:"res"}],StageClearEffect:[function(t,e,i){"use strict";cc._RF.push(e,"68649RaP2FPRrt7cLlQO4QE","StageClearEffect"),cc.Class({extends:cc.Component,properties:{anim:cc.Animation},onLoad:function(){this.imgStageClearBG=this.node.getChildByName("imgStageClearBG"),this.imgStageClear=this.node.getChildByName("imgStageClear")},playEffect:function(t,e){this.node.active=!0,this.pos=t,this.setPlayEndCallback(e),this.imgStageClearBG.active=!0,this.imgStageClear.stopAllActions(),this.imgStageClear.setPosition(0,0),this.anim.stop(),this.anim.play("stageClear")},flyWord:function(){this.imgStageClearBG.active=!1;var t=[];t.push(cc.moveTo(.2,this.pos.x,this.pos.y)),t.push(cc.callFunc(this.playEnd.bind(this))),this.imgStageClear.runAction(cc.sequence(t))},playSound:function(){},setPlayEndCallback:function(t){this.endCB=t},playEnd:function(){this.imgStageClear.stopAllActions(),this.imgStageClear.setPosition(0,0),this.anim.stop(),this.node.active=!1;var t=this.endCB;this.endCB=null,null!=t&&t()}}),cc._RF.pop()},{}],StarHandler:[function(t,e,i){"use strict";cc._RF.push(e,"7c0770pJA9F05YVJ/u7J/uH","StarHandler");var s=t("StarPool"),c=t("ParticleStarPool"),r=t("gameConfig"),o=t("gameSound"),n=t("AddScoreEffect");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.hintT=5,this.hintPos=null,this.firstX=(this.node.width-r.rowNum*r.stepNum)/2,this.firstY=100},setKillCallback:function(t){this.killCB=t},setGameOverCallback:function(t){this.gameOverCB=t},startGame:function(){this.reset();var t=cc.sys.localStorage.getItem(r.gameName+"GAME_STAR_DATA");null!=t?this.typeList=utils.getTDArrayFromString(t,",",";"):(this.typeList=this.createTypeList(),t=utils.getStringFromTDArray(this.typeList,",",";"),cc.sys.localStorage.setItem(r.gameName+"GAME_STAR_DATA",t)),this.updateLayer(),this.startAction(this.startActionCB.bind(this))},startAction:function(t){for(var e=0,i=0;i<r.rowNum;i++){e=.1*i;for(var s=0;s<r.columnNum;s++){var c=this.starList[s][i];null!=c&&(c.y+=this.node.height,c.runAction(cc.sequence(cc.delayTime(e),cc.moveBy(.2,0,-this.node.height)))),e+=.1}}setTimeout(t,2e3)},startActionCB:function(){this.openTouch(),this.checkContinue()},openTouch:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this)},closeTouch:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this)},createTypeList:function(){for(var t=[],e=0;e<r.columnNum;e++){for(var i=[],s=0;s<r.rowNum;s++)i.push(utils.randomInt(0,r.maxTypeNum));t.push(i)}return t},updateLayer:function(){for(var t=this.firstX+r.stepNum/2-this.node.width/2,e=this.firstY+r.stepNum/2-this.node.height/2,i=0;i<r.columnNum;i++){for(var s=t,c=[],o=0;o<r.rowNum;o++)c.push(this.addStar(this.typeList[i][o],cc.p(s,e))),s+=r.stepNum;e+=r.stepNum,this.starList.push(c)}},addStar:function(t,e){if(null!=t){var i=s.getStar();return this.node.addChild(i),i.setPosition(e),i.getComponent("star").initStar(t),i}},addParticleStar:function(t,e){var i=c.getParticleStar(t);return this.node.addChild(i),i.setPosition(e),i},removeParticleStar:function(t){t.removeFromParent(),c.putParticleStar(t)},onTouchBegan:function(t,e){var i=t.getLocation(),s=this.node.convertToNodeSpace(i),c=Math.floor((s.x-this.firstX)/r.stepNum),o=Math.floor((s.y-this.firstY)/r.stepNum),n=c>=0&&c<r.rowNum,a=o>=0&&o<r.columnNum;n&&a?this.touchStars(o,c):this.recoverStars()},touchStars:function(t,e){var i=this.starList[t][e];if(-1==this.selectedStarList.indexOf(i)){if(this.recoverStars(),null!=i){o.selectStar();var s=i.getComponent("star");this.selectSameTypeStars(s.type,t,e),this.stopHintStars()}}else this.killStars(i)},recoverStars:function(){cc.each(this.selectedStarList,function(t){t.getComponent("star").onSelect(!1)},this),this.selectedStarList=[],this.selectedPosList=[]},killStars:function(t){var e=t.getPosition(),i=this.selectedStarList.length,s=r.algorithm.getKillScore(i);null!=this.killCB&&this.killCB(i,s),cc.each(this.selectedStarList,function(t){o.killStar();var e=t.getComponent("star");e.onKill();var i=this.addParticleStar(e.type,t.getPosition());setTimeout(this.removeParticleStar.bind(this,i),3e3)},this),this.selectedStarList=[],cc.each(this.selectedPosList,function(t){this.typeList[t.x][t.y]=null,this.starList[t.x][t.y]=null},this),this.selectedPosList=[],n.showEffect(this.node,e,s),this.checkColumn()},selectSameTypeStars:function(t,e,i){var s=null;e-1>=0&&(s=this.starList[e-1][i],this.selectStar(t,s,e-1,i)),e+1<r.columnNum&&(s=this.starList[e+1][i],this.selectStar(t,s,e+1,i)),i-1>=0&&(s=this.starList[e][i-1],this.selectStar(t,s,e,i-1)),i+1<r.rowNum&&(s=this.starList[e][i+1],this.selectStar(t,s,e,i+1))},selectStar:function(t,e,i,s){if(null!=e){var c=e.getComponent("star");t!=c.type||c.isSelected||(c.onSelect(!0),this.selectedStarList.push(e),this.selectedPosList.push(cc.p(i,s)),this.selectSameTypeStars(t,i,s))}},checkColumn:function(){for(var t=!1,e=0;e<r.rowNum;e++)for(var i=0,s=0;s<r.columnNum;s++){var c=this.typeList[s][e],o=this.starList[s][e];null==o?i++:0!=i&&(t=!0,o.runAction(cc.moveBy(.1,0,-i*r.stepNum)),this.typeList[s-i][e]=c,this.typeList[s][e]=null,this.starList[s-i][e]=o,this.starList[s][e]=null)}this.closeTouch(),t?setTimeout(this.checkRow.bind(this),200):this.checkRow()},checkRow:function(){for(var t=!1,e=0,i=0;i<r.rowNum;i++){var s=this.typeList[0][i],c=this.starList[0][i];if(null==c)e++;else if(0!=e)for(var o=0;o<r.columnNum;o++)s=this.typeList[o][i],t=!0,null!=(c=this.starList[o][i])&&c.runAction(cc.moveBy(.1,-e*r.stepNum,0)),this.typeList[o][i-e]=s,this.typeList[o][i]=null,this.starList[o][i-e]=c,this.starList[o][i]=null}t?setTimeout(this.openTouch.bind(this),200):this.openTouch(),this.checkContinue();var n=utils.getStringFromTDArray(this.typeList,",",";");cc.sys.localStorage.setItem(r.gameName+"GAME_STAR_DATA",n)},checkContinue:function(){var t=r.algorithm.checkAdjacent(this.typeList);0==t.length?this.gameOver():this.setHintStar(t)},setHintStar:function(t){this.hintT=5,this.hintPos=t[utils.randomInt(0,t.length-1)];var e=this.starList[this.hintPos.x][this.hintPos.y];if(null!=e){var i=e.getComponent("star");this.selectSameTypeStars(i.type,this.hintPos.x,this.hintPos.y),this.hintStarList=this.selectedStarList,this.recoverStars()}},update:function(t){0==this.selectedStarList.length?this.hintT-=t:this.hintT=5,0!=this.hintStarList.length&&this.hintT<0&&(this.hintT=5,this.hintStars())},hintStars:function(){cc.each(this.hintStarList,function(t){t&&t.getComponent("star").onHint()},this)},stopHintStars:function(){cc.each(this.hintStarList,function(t){t&&t.getComponent("star").stopHint()},this),this.hintStarList=[]},gameOver:function(){this.surplusList=r.algorithm.getSurplusList(this.starList),null!=this.gameOverCB&&this.gameOverCB(this.surplusList.length)},removeSurplusStar:function(){cc.each(this.surplusList,function(t){if(t){var e=t.getComponent("star");e.removeStar();var i=this.addParticleStar(e.type,t.getPosition());setTimeout(this.removeParticleStar.bind(this,i),3e3)}},this),this.surplusList=[]},reset:function(){this.hintT=5,this.hintPos=null,cc.each(this.starList,function(t){t&&cc.each(t,function(t){t&&t.getComponent("star").removeStar()},this)},this),this.typeList=[],this.starList=[],this.selectedStarList=[],this.selectedPosList=[],this.stopHintStars(),this.removeSurplusStar(),this.closeTouch(),n.stopAllEffect()},onDestroy:function(){this.closeTouch()}}),cc._RF.pop()},{AddScoreEffect:"AddScoreEffect",ParticleStarPool:"ParticleStarPool",StarPool:"StarPool",gameConfig:"gameConfig",gameSound:"gameSound"}],StarPool:[function(t,e,i){"use strict";cc._RF.push(e,"79d31L53c1M3IC86bhGCRIb","StarPool");var s=t("UiTools"),c=t("res"),r=new(cc.Class({init:function(){this.pool=new cc.NodePool},getStar:function(){return this.pool.size()>0?this.pool.get():s.createPrefab(c.star_Pre)},putStar:function(t){this.pool.put(t)}}));r.init(),e.exports=r,cc._RF.pop()},{UiTools:"UiTools",res:"res"}],TipStrip:[function(t,e,i){"use strict";cc._RF.push(e,"faddccv50BL362NSUK8N7R4","TipStrip"),cc.Class({extends:cc.Component,properties:{imgBG:cc.Node,tfTips:cc.Label},onLoad:function(){},showTips:function(t,e,i){this.imgBG.active=!0,this.tfTips.string=t;var s=this.node.width+this.imgBG.width;this.imgBG.y=e.y;var c=[];c.push(cc.moveTo(.5,0,0)),c.push(cc.delayTime(1.5)),c.push(cc.moveBy(.5,s,0)),c.push(cc.callFunc(this.hideTips.bind(this,i))),this.tfTips.node.stopAllActions(),this.tfTips.node.x=-s,this.tfTips.node.runAction(cc.sequence(c))},hideTips:function(t){this.tfTips.node.stopAllActions(),this.imgBG.active=!1,null!=t&&t()}}),cc._RF.pop()},{}],UiTools:[function(t,e,i){"use strict";cc._RF.push(e,"8076bwcSHdCRYy8veC7Bq7x","UiTools");var s={getSpriteFrame:function(t,e){if(null==e){var i=new cc.SpriteFrame;return i.setTexture(cc.loader.getRes(t)),i}return cc.loader.getRes(e,cc.SpriteAtlas).getSpriteFrame(t)},createSpriteNode:function(t,e){var i=new cc.Node;return i.addComponent(cc.Sprite).spriteFrame=this.getSpriteFrame(t,e),i},setSpriteFrame:function(t,e,i){var s=t.getComponent(cc.Sprite),c=this.getSpriteFrame(e,i);null!=c?s.spriteFrame=c:console.log('setSpriteFrame:"{0}"--"{1}" no exist!'.format(i,e))},createPrefab:function(t){return cc.instantiate(cc.loader.getRes(t,cc.Prefab))},scaleClickRegion:function(t,e,i){var s=t.node;t.interactable=!1;var c=cc.instantiate(s);c.setPosition(0,0),c.scale=i||.8,c.opacity=1,c.parent=s;var r=t.zoomScale,o=t.duration;s.trigger=c;var n=function(){s.scaleState=0};c.on(cc.Node.EventType.TOUCH_START,function(){1!=s.scaleState&&s.scale<r&&(s.stopAllActions(),s.scaleState=1,s.runAction(cc.sequence(cc.scaleTo(o,r),cc.callFunc(n))))}),c.on(cc.Node.EventType.TOUCH_END,function(){-1!=s.scaleState&&s.scale>1&&(s.stopAllActions(),s.scaleState=-1,s.runAction(cc.sequence(cc.scaleTo(o,1),cc.callFunc(n)))),null!=e&&e()}),c.on(cc.Node.EventType.TOUCH_CANCEL,function(){-1!=s.scaleState&&s.scale>1&&(s.stopAllActions(),s.scaleState=-1,s.runAction(cc.sequence(cc.scaleTo(o,1),cc.callFunc(n))))})},createFrameAnimationNode:function(t){var e=null;t.pattern?e=this.getSpriteFrames(t.atlas,t.pattern,t.idxStart,t.idxEnd):e=cc.loader.getRes(t.atlas,cc.SpriteAtlas).getSpriteFrames();null!=t.idxFrameStart&&t.idxFrameStart>=0&&t.idxFrameStart<e.length&&(e=e.slice(t.idxFrameStart).concat(e.slice(0,t.idxFrameStart)));var i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=e[0];var s=i.addComponent(cc.Animation),c=cc.AnimationClip.createWithSpriteFrames(e,t.fps);if(c.name=t.clipName||"anim",s.addClip(c),t.loop)c.wrapMode=cc.WrapMode.Loop,s.play(c.name);else if(t.once){s.play(c.name);s.on("finished",function t(){i.parent=null,s.off("finished",t)})}return i},addOutline:function(t,e,i){if(t instanceof cc.Label&&(t=t.node),null!=t.getComponent(cc.Label)){var s=t.addComponent(cc.LabelOutline);s.color=e,s.width=i}else console.error("utils.ui.addOutline:is not label component")}};e.exports=s,cc._RF.pop()},{}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"408c5OtL7VJrbqLj3AmA2pQ","Utils"),window.utils={exitGame:function(t){cc.sys.isNative?cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppController","exitGame"):jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","exitGame","()V"):null!=t&&cc.js.isString(t)?location.replace(t):location.reload()},formatD:function(t,e){for(var i=e.toString(),s=i.length;t>s;)i="0"+i,t--;return i},getUrlParams:function(){if(!cc.sys.isBrowser)return{};if(null==this.urlParams){this.urlParams={};var t=window.location.href.split("?");if(t.length>1){t=t[1].split("&");for(var e=0;e<t.length;++e){var i=t[e].split("=");this.urlParams[i[0]]=i[1]}}}return this.urlParams},randomInt:function(t,e){return Math.floor(t+Math.random()*(e-t+1))},random:function(t,e){return t+Math.random()*(e-t)},getStringFromTDArray:function(t,e,i){var s="";return cc.each(t,function(c,r){cc.each(c,function(t,i){s+=null==t?"":t.toString(),i<c.length-1&&(s+=e)},this),r<t.length-1&&(s+=i)},this),s},getTDArrayFromString:function(t,e,i){for(var s=[],c=t.split(i),r=0;r<c.length;r++){for(var o=[],n=c[r].split(e),a=0;a<n.length;a++){var l=n[a];o.push(""==l?null:parseInt(l))}s.push(o)}return s},splitNumber:function(t){var e=t.toString(),i=e.charAt(0);"-"==i||"+"==i?e=e.substr(1):i="";var s=e.split(".");if(s.length>1)return s[0]=utils.splitNumber(s[0]),i+s.join(".");for(s=[];e.length>3;)s.unshift(e.substr(e.length-3)),e=e.substr(0,e.length-3);return s.unshift(e),e=i+(e=s.join(","))},stringRepeat:function(t,e){for(var i=t;e>1;)--e,i+=t;return i},getDataFromExtend:function(t,e,i,s){var c=null,r=t.split(i);return cc.each(r,function(t){var i=t.split(s);i[0]==e&&(c=i[1])},this),c},getQueryFromObj:function(t){if(null==t)return null;var e=[];return cc.each(t,function(t,i){null!=t&&e.push("{0}={1}".format(i,t))}),e.join("&")}},String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"gm"),e)},String.prototype.format=function(t){var e=this;if(arguments.length<1)return e;var i=arguments;for(var s in i){var c=i[s];null!=c&&(e=e.replaceAll("\\{"+s+"\\}",c))}return e},Array.prototype.removeElement=function(t){var e=this.indexOf(t);if(-1!=e)return this.splice(e,1)},cc.each=function(t,e,i){if(t)if(t instanceof Array){for(var s=0,c=t.length;s<c;s++)if(!1===e.call(i,t[s],s))return}else for(var r in t)if(!1===e.call(i,t[r],r))return},cc._RF.pop()},{}],algorithm:[function(t,e,i){"use strict";cc._RF.push(e,"0c18dvUrLhCeoBGuuyUzrmc","algorithm");var s=cc.Class({getAimScoreIncrement:function(t){var e=1500;return t>1&&(e=2e3+20*(t-2)),e},getKillScore:function(t){for(var e=0,i=0;i<t;i++)e+=5*(2*i+1);return e},getSurplusAddScore:function(t,e){return(t<=e?1e3:0)+this.getKillScore(e-t)},getSurplusList:function(t){for(var e=[],i=t.length,s=t[0].length,c=0;c<s;c++)for(var r=0;r<i;r++){var o=t[r][c];null!=o&&e.push(o)}return e},checkAdjacent:function(t){for(var e=[],i=t.length,s=t[0].length,c=0;c<s;c++)for(var r=0;r<i;r++){var o=t[r][c];if(null!=o){var n=r+1==i?null:t[r+1][c],a=c+1==s?null:t[r][c+1];o!=n&&o!=a||e.push(cc.p(r,c))}}return e}});e.exports=s,cc._RF.pop()},{}],chn:[function(t,e,i){"use strict";cc._RF.push(e,"f8f1bIyHQJPqZ9Uf/Kiwkih","chn"),e.exports={AimScore_txt:"目标分数:",RoundNum_txt:"第 {0} 关",AddScore_txt:"消除{0}个星星：{1}分",MsxScore_txt:"最高分数:",StarGame_Tips:"第 {0} 关\n\n目标分数:{1}",AchieveAimScore_Tips:"目标达成！",RoundOver_Tips:"剩余{0}颗星星\n获得分数:{1}",defaultFont:"Microsoft YaHei",extend:{}},cc._RF.pop()},{}],gameConfig:[function(t,e,i){"use strict";cc._RF.push(e,"7fb75SnT7pAsbzExYsi6KpF","gameConfig");e.exports={account:"HYS",gameName:"KillStar",firstAimScore:1e3,rowNum:8,columnNum:10,stepNum:96,maxTypeNum:4,maxSurplusNum:10},cc._RF.pop()},{}],gameSound:[function(t,e,i){"use strict";cc._RF.push(e,"2fa8aVZPrBNEZ/7lAvGMBrV","gameSound");var s=t("AGAudio"),c=new(cc.Class({extends:s,bgm:function(){this.playMusic("sound/bgm.mp3",!0)},applause:function(){this.playEffect("sound/applause.mp3")},gameOver:function(){this.playEffect("sound/gameover.mp3")},selectStar:function(){this.playEffect("sound/select.mp3")},killStar:function(){this.playEffect("sound/clear.mp3")},clickButton:function(){this.playEffect("sound/button.mp3")}}));e.exports=c,cc._RF.pop()},{AGAudio:"AGAudio"}],game:[function(t,e,i){"use strict";cc._RF.push(e,"2635bJpPplERIfo5TZhIBU6","game");var s=t("i18n"),c=t("algorithm"),r=t("gameConfig"),o=t("gameSound"),n=t("TipStrip"),a=t("StarHandler"),l=t("PraiseEffect"),u=t("StageClearEffect");cc.Class({extends:cc.Component,properties:{tipStrip:{default:null,type:n},starHandler:{default:null,type:a},praiseEffect:{default:null,type:l},stageClearEffect:{default:null,type:u},imgTxtAimScore:cc.Node,imgTxtRound:cc.Node,imgTxtMaxScore:cc.Node,tfAimScore:cc.Label,tfRoundNum:cc.Label,tfScore:cc.Label,tfAddScore:cc.Label,tfMaxScore:cc.Label,tipsGameStar:cc.Node,tipsGameOver:cc.Node,imgStageClear:cc.Node},onLoad:function(){o.bgm(),this.isAchieve=!1,this.tipStripPos=cc.p(0,100),this.reset(),this.algorithm=new c,r.algorithm=this.algorithm,this.starHandler.setKillCallback(this.updateAddScore.bind(this)),this.starHandler.setGameOverCallback(this.roundOver.bind(this)),this.showStartView()},showStartView:function(){null!=cc.sys.localStorage.getItem(r.gameName+"GAME_ROUND")?this.tipsGameStar.active=!0:setTimeout(this.newGame.bind(this),100)},newGame:function(){o.clickButton(),this.tipsGameStar.active=!1,cc.sys.localStorage.removeItem(r.gameName+"GAME_STAR_DATA"),this.startGame(r.firstAimScore,1)},continueGame:function(){o.clickButton(),this.tipsGameStar.active=!1;var t=parseInt(cc.sys.localStorage.getItem(r.gameName+"GAME_ROUND")),e=parseInt(cc.sys.localStorage.getItem(r.gameName+"GAME_AIM_SCORE"));this.startGame(e,t);var i=cc.sys.localStorage.getItem(r.gameName+"GAME_SCORE");null!=i&&this.updateScore(parseInt(i),!1)},startGame:function(t,e){var i=cc.sys.localStorage.getItem(r.gameName+"GAME_MAX_SCORE");i&&(this.imgTxtMaxScore.active=!0,this.tfMaxScore.string=i),this.updateAimScore(t),this.updateRoundNum(e);var c=s.getTxt("StarGame_Tips").format(e,t);this.tipStrip.showTips(c,this.tipStripPos,this.starHandler.startGame.bind(this.starHandler))},startRound:function(){this.roundReset();var t=this.aimScoreNum+this.algorithm.getAimScoreIncrement(this.roundNum);setTimeout(this.startGame.bind(this,t,this.roundNum+1),500)},restart:function(){o.clickButton(),cc.sys.localStorage.removeItem(r.gameName+"GAME_ROUND"),cc.sys.localStorage.removeItem(r.gameName+"GAME_SCORE"),cc.sys.localStorage.removeItem(r.gameName+"GAME_AIM_SCORE"),cc.sys.localStorage.removeItem(r.gameName+"GAME_STAR_DATA"),this.reset(),this.startGame(r.firstAimScore,1)},reset:function(){this.isAchieve=!1,this.aimScoreNum=0,this.imgTxtAimScore.active=!1,this.tfAimScore.string="",this.roundNum=0,this.imgTxtRound.active=!1,this.tfRoundNum.string="",this.scoreNum=0,this.tfScore.string="",this.tfAddScore.string="",this.imgTxtMaxScore.active=!1,this.tfMaxScore.string="",this.tipsGameStar.active=!1,this.tipsGameOver.active=!1,this.praiseEffect.node.active=!1,this.imgStageClear.active=!1,this.stageClearEffect.node.active=!1,this.tipStrip.hideTips(),this.starHandler.reset()},roundReset:function(){this.isAchieve=!1,this.tfAddScore.string="",this.tipsGameOver.active=!1,this.praiseEffect.node.active=!1,this.imgStageClear.active=!1,this.stageClearEffect.node.active=!1,this.starHandler.removeSurplusStar(),cc.sys.localStorage.removeItem(r.gameName+"GAME_STAR_DATA")},updateAimScore:function(t){this.aimScoreNum=t,this.tfAimScore.string=t,this.imgTxtAimScore.active=!0,cc.sys.localStorage.setItem(r.gameName+"GAME_AIM_SCORE",t)},updateRoundNum:function(t){this.roundNum=t,this.tfRoundNum.string=t,this.imgTxtRound.active=!0,cc.sys.localStorage.setItem(r.gameName+"GAME_ROUND",t)},updateScore:function(t,e){this.scoreNum=t,this.tfScore.string=t,this.scoreNum>=this.aimScoreNum&&!this.isAchieve&&(this.isAchieve=!0,e?(o.applause(),this.stageClearEffect.playEffect(this.imgStageClear.getPosition(),this.showStageClear.bind(this))):this.showStageClear()),cc.sys.localStorage.setItem(r.gameName+"GAME_SCORE",t)},showStageClear:function(){this.imgStageClear.active=!0},updateAddScore:function(t,e){if(this.tfAddScore.string=s.getTxt("AddScore_txt").format(t,e),this.updateScore(this.scoreNum+e,!0),t>=5){var i=0;t>=8&&(i=1),this.praiseEffect.playEffect(i)}},roundOver:function(t){var e=this.algorithm.getSurplusAddScore(t,r.maxSurplusNum);if(this.updateScore(this.scoreNum+e,!0),this.scoreNum>=this.aimScoreNum){var i=s.getTxt("RoundOver_Tips").format(t,e);this.tipStrip.showTips(i,this.tipStripPos,this.startRound.bind(this))}else{var c=cc.sys.localStorage.getItem(r.gameName+"GAME_MAX_SCORE");(null==c||this.scoreNum>parseInt(c))&&cc.sys.localStorage.setItem(r.gameName+"GAME_MAX_SCORE",this.scoreNum),this.gameOver()}},gameOver:function(){o.gameOver(),this.tipsGameOver.active=!0,cc.sys.localStorage.removeItem(r.gameName+"GAME_ROUND"),cc.sys.localStorage.removeItem(r.gameName+"GAME_SCORE"),cc.sys.localStorage.removeItem(r.gameName+"GAME_AIM_SCORE"),cc.sys.localStorage.removeItem(r.gameName+"GAME_STAR_DATA")}}),cc._RF.pop()},{PraiseEffect:"PraiseEffect",StageClearEffect:"StageClearEffect",StarHandler:"StarHandler",TipStrip:"TipStrip",algorithm:"algorithm",gameConfig:"gameConfig",gameSound:"gameSound",i18n:"i18n"}],i18n:[function(t,e,i){"use strict";cc._RF.push(e,"b0c10J+l0lHlY5tzqTrXACG","i18n");var s=new(cc.Class({setLang:function(e){var i="chn";null!=e&&(i=e=e.toLowerCase()),this.lang=t(i)},setLangExtend:function(e){this.lang.extend=t(e)},getTxt:function(t){return this.lang.hasOwnProperty(t)?this.lang[t]:this.lang.extend&&this.lang.extend.hasOwnProperty(t)?this.lang.extend[t]:""},getDefaultFont:function(){return this.lang.hasOwnProperty("defaultFont")?this.lang.defaultFont:"Microsoft YaHei"}}));s.setLang(),e.exports=s,cc._RF.pop()},{}],resLists:[function(t,e,i){"use strict";cc._RF.push(e,"fc396wIBHdGH7FAEW2tSE7o","resLists");var s=t("res"),c=[[s.entrySceneBG_jpg,s.gameBG_jpg],[s.ui_atlas,s.effect_atlas,s.star_atlas],[s.tipStrip_Pre,s.star_Pre,s.nodeAddScore_Pre,s.nodeParticleStar_Pre,s.praiseLayer_Pre,s.StageClearLayer_Pre],["labelAtlas/num_game_score"],[],[],[s.addScore_anim,s.praise_anim,s.stageClear_anim],[]];e.exports=c,cc._RF.pop()},{res:"res"}],resMgr:[function(t,e,i){"use strict";cc._RF.push(e,"386ecryOeBPFZQ7YDSOLZtB","resMgr");var s=[cc.SpriteFrame,cc.SpriteAtlas,cc.Prefab,cc.LabelAtlas,cc.TextAsset,cc.AudioClip,cc.AnimationClip,cc.Font],c=new(cc.Class({load:function(t,e,i,s){var c=setTimeout(function(){s&&s()},12e4),r=this._addRes(t),o=0,n=r.length;r.forEach(function(t){var s=t[0],r=t[1];cc.loader.loadRes(s,r,function(t,r){null!=t&&console.log("load asset error:"+s+"msg:"+t),++o,e&&e(o/n),o===n&&(i&&i(),clearTimeout(c))}.bind(this))}.bind(this))},_addRes:function(t){var e=[];return t.forEach(function(t,i){var c=s[i];t.forEach(function(t){e.push([t,c])})}),e}}));e.exports=c,cc._RF.pop()},{}],res:[function(t,e,i){"use strict";cc._RF.push(e,"1c118iWo+5JqbM1yogLmYY8","res");e.exports={entrySceneBG_jpg:"imgs/entryScene_bg",gameBG_jpg:"imgs/game_bg",tipStrip_Pre:"prefabs/TipStrip",star_Pre:"prefabs/star",nodeAddScore_Pre:"prefabs/nodeAddScore",nodeParticleStar_Pre:"prefabs/nodeParticleStar",praiseLayer_Pre:"prefabs/PraiseLayer",StageClearLayer_Pre:"prefabs/StageClearLayer",ui_atlas:"atlas/ui",effect_atlas:"atlas/effect",star_atlas:"atlas/star",addScore_anim:"anim/addScore",praise_anim:"anim/praise",stageClear_anim:"anim/stageClear"},cc._RF.pop()},{}],star:[function(t,e,i){"use strict";cc._RF.push(e,"d60b5DYN8BFfJXQ/Qxhqa0Z","star");var s=t("res"),c=t("UiTools"),r=t("StarPool");cc.Class({extends:cc.Component,properties:{imgStar:cc.Sprite},onLoad:function(){this.isSelected=!1},initStar:function(t){this.isSelected=!1,this.type=t,this.setStarSpriteFrame(t,!1)},setStarSpriteFrame:function(t,e){var i=e?"star_select_":"star_";i+=t,this.imgStar.spriteFrame=c.getSpriteFrame(i,s.star_atlas)},onSelect:function(t){this.setStarSpriteFrame(this.type,t),this.stopHint(),t&&this.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.1),cc.scaleTo(.5,.8),cc.scaleTo(.5,1),cc.delayTime(.1)))),this.isSelected=t},onHint:function(){this.stopHint(),this.node.runAction(cc.repeat(cc.sequence(cc.delayTime(.1),cc.scaleTo(.5,.8),cc.scaleTo(.5,1),cc.delayTime(.1)),3))},stopHint:function(){this.node.stopAllActions(),this.node.scale=1},onKill:function(){this.removeStar()},removeStar:function(){this.stopHint(),this.node.removeFromParent(),r.putStar(this.node)}}),cc._RF.pop()},{StarPool:"StarPool",UiTools:"UiTools",res:"res"}]},{},["EntryScene","TipStrip","chn","i18n","res","resLists","resMgr","gameSound","algorithm","AddScoreEffect","PraiseEffect","StageClearEffect","game","gameConfig","ParticleStarPool","StarHandler","StarPool","star","AGAudio","NodeTools","UiTools","Utils"]);