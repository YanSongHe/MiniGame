require=function t(e,i,n){function s(o,r){if(!i[o]){if(!e[o]){var a="function"==typeof require&&require;if(!r&&a)return a(o,!0);if(c)return c(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return s(i||t)},u,u.exports,t,e,i,n)}return i[o].exports}for(var c="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({AGAudio:[function(t,e,i){"use strict";cc._RF.push(e,"0b064RH5XNNw7XNaAOMtJln","AGAudio");var n=1,s=1,c=cc.Class({ctor:function(){this._isStop=!1,this.audio=null,this.musicId=null,this.effectId=null,cc.sys.__audioSupport&&cc.sys.__audioSupport.context&&(this._context=cc.sys.__audioSupport.context,"createBufferSource"in this._context&&(this.audio=this._context.createBufferSource())),cc.game.on(cc.game.EVENT_HIDE,this.onGameHide,this),cc.game.on(cc.game.EVENT_SHOW,this.onGameShow,this)},onGameHide:function(){this._isStop=!0},onGameShow:function(){this._isStop=!1},playMusic:function(t,e){return this.stopMusic(),t=cc.url.raw("resources/"+t),this.musicId=cc.audioEngine.play(t,e,n),this.musicId},playEffect:function(t){if((!this.audio||this.audio.context.state&&"suspended"!==this.audio.context.state||0!==this._context.currentTime)&&(this.audio=null,!this._isStop))return t=cc.url.raw("resources/"+t),this.effectId=cc.audioEngine.play(t,!1,s),this.effectId},setMusicVolume:function(t){n=t,null!=this.musicId&&cc.audioEngine.setVolume(this.musicId,t)},getMusicVolum:function(){return n},setEffectsVolume:function(t){s=t,null!=this.effectId&&cc.audioEngine.setVolume(this.effectId,t)},getEffectsVolum:function(){return s},stopMusic:function(){null!=this.musicId&&cc.audioEngine.stop(this.musicId),this.musicId=null},reset:function(){this.stopMusic()}});e.exports=c,cc._RF.pop()},{}],EntryScene:[function(t,e,i){"use strict";cc._RF.push(e,"46a268APPtBi4LsT3UncRcx","EntryScene"),cc.Class({extends:cc.Component,properties:{progressBar:{default:null,type:cc.ProgressBar}},onLoad:function(){this.initUI(),this.startLoadRes()},initUI:function(){this.updateProgress(0)},startLoadRes:function(){t("resMgr").load(t("resLists"),this.onResLoadProgress.bind(this),this.onCompleted.bind(this),this.onTimeOut.bind(this))},onResLoadProgress:function(t){this.updateProgress(.9*t)},updateProgress:function(t){this.progressBar.progress=t},onCompleted:function(){this.updateProgress(1),this.startGame()},onTimeOut:function(){},startGame:function(){cc.director.loadScene("game")}}),cc._RF.pop()},{resLists:"resLists",resMgr:"resMgr"}],NodeTools:[function(t,e,i){"use strict";cc._RF.push(e,"8cb27nmTkdKsq2xdvdoHA/V","NodeTools");var n={getComponent:function(t,e){return t?t.getComponent(e):(console.error("getComponent is error: node is null"),null)},getNodeByName:function(t,e){var i=cc.find(t,e);return i||console.error("getNodeByName is error: nodeName "+t),i},getComponentByType:function(t,e,i){var n=this.getNodeByName(t,i);return this.getComponent(n,e)},getWidget:function(t,e){return this.getComponentByType(t,cc.Widget,e)},getButton:function(t,e){return this.getComponentByType(t,cc.Button,e)},getLabel:function(t,e){return this.getComponentByType(t,cc.Label,e)},getRichText:function(t,e){return this.getComponentByType(t,cc.RichText,e)},getSprite:function(t,e){return this.getComponentByType(t,cc.Sprite,e)},getEditBox:function(t,e){return this.getComponentByType(t,cc.EditBox,e)},addClickListener:function(t,e,i,n){var s=this.getNodeByName(t,n);s&&s.on("click",e,i)},removeClickListener:function(t,e,i,n){var s=this.getNodeByName(t,n);s&&s.off("click",e,i)},addNodeClickListener:function(t,e,i){t&&t.on("click",e,i)},removeNodeClickListener:function(t,e,i){t&&t.off("click",e,i)},setButtonTitle:function(t,e){cc.js.isString(t)&&null==(t=this.getNodeByName(t))?console.log("#############setButtonTitle:no button:"+t):this.getLabel("Label",t).string=e},traversalNode:function(t,e){e(t);for(var i=0;i<t.children.length;++i)this.traversalNode(t.children[i],e)}};e.exports=n,cc._RF.pop()},{}],RingsHandler:[function(t,e,i){"use strict";cc._RF.push(e,"2665brtPyxLV6pjJX9Gc1fm","RingsHandler");var n=t("gameConfig");cc.Class({extends:cc.Component,properties:{nodeAddRing:cc.Node,nodeRingsMatrix:[cc.Node]},onLoad:function(){this.effects=this.node.getComponent("effects"),this.oldAddRingPos=this.nodeAddRing.getPosition()},setGameOverCallback:function(t){this.gameOverCB=t},startGame:function(){this.showNewAddNode(null)},showNewAddNode:function(t){this.nodeAddRing.scale=1,this.nodeAddRing.opacity=255,this.nodeAddRing.active=!0,this.addData=t||this.getNewAddData(),this.updateNodeRing(this.nodeAddRing,this.addData),null==t&&(this.nodeAddRing.y=-(this.node.height+this.nodeAddRing.height)/2,this.nodeAddRing.runAction(cc.moveTo(.2,this.oldAddRingPos.x,this.oldAddRingPos.y)),cc.sys.localStorage.setItem(n.account+"GAME_ADD_NODE_DATA",this.addData.toString()))},changeAddNode:function(){if(0==this.nodeAddRing.getNumberOfRunningActions()){var t=[];return t.push(cc.spawn(cc.scaleTo(.2,.5),cc.fadeOut(.2))),t.push(cc.callFunc(this.showNewAddNode.bind(this,null))),this.nodeAddRing.runAction(cc.sequence(t)),!0}return!1},getNewAddData:function(){for(var t=n.useColorNum,e=[0,0,0],i=this.ringsDataMatrix.concat(),s=0;s<i.length;){0==i[s].getElementNum(0)?i.splice(s,1):s++}if(0==i.length)return null!=this.gameOverCB&&this.gameOverCB(),e;for(var c=0,o=i[utils.randomInt(0,i.length-1)],r=0;r<3;r++){0==o[r]&&(e[r]=utils.randomInt(1,t),c++)}return c>1&&(e[utils.randomInt(0,2)]=0,c>2&&(e[utils.randomInt(0,2)]=0)),e},addRingsToMatrix:function(t){if(-1==t)return!1;for(var e=this.ringsDataMatrix[t].concat(),i=0;i<e.length;i++){var n=this.addData[i],s=e[i];if(0!=n&&0!=s)return!1;0==s&&(e[i]=n)}return this.addRingIndex=t,this.ringsDataMatrix[t]=e,!0},updateRingsMatrix:function(t){for(var e=0;e<9;e++){var i=this.nodeRingsMatrix[e],s=this.ringsDataMatrix[e];this.updateNodeRing(i,s)}if(!t){var c=utils.getStringFromTDArray(this.ringsDataMatrix,",",";");cc.sys.localStorage.setItem(n.account+"GAME_NODES_DATA",c)}},updateNodeRing:function(t,e){for(var i=0;i<3;i++){var s=t.getChildByName("imgRing"+i),c=e[i];s.scale=1,s.active=0!=c,0!=c&&(s.color=n.ringsColorList[c])}},reductionRing:function(t){t.scale=1},clearRings:function(t){var e=0,i=this.checkClear(),n=i[0];if(0!=n.length){for(var s=0;s<n.length;s++){var c=n[s].split(":"),o=this.ringsDataMatrix[c[0]][c[1]];if(0!=o){this.ringsDataMatrix[c[0]][c[1]]=0;var r=this.nodeRingsMatrix[c[0]].getChildByName("imgRing"+c[1]);r.runAction(cc.sequence(cc.scaleTo(.2,0),cc.callFunc(this.reductionRing.bind(this,r)))),this.effects.addRingsParticle(o,this.nodeRingsMatrix[c[0]].getPosition()),e++}}this.clearEffectOverIntervalId=setTimeout(this.updateRingsMatrix.bind(this,!1),250)}null!=t&&t(e,i[1])},checkClear:function(){var t=0,e=[],i=null,n=null,s=this.addRingIndex,c=Math.floor(s/3),o=s%3,r=this.ringsDataMatrix[s],a=[],l=[],u=r[0];if(0!=u&&3==r.getElementNum(u)){for(var h=0;h<3;h++)e.push(s+":"+h);t++}l=[3*c,3*c+1,3*c+2],a=[this.ringsDataMatrix[l[0]],this.ringsDataMatrix[l[1]],this.ringsDataMatrix[l[2]]];var d=this.check3nodeRingsClear(r,a,l);e=e.concat(d),0!=d.length&&(i=d[0].split(":"),n=this.ringsDataMatrix[i[0]][i[1]],this.effects.showLaser(c,n),t++),l=[o,3+o,6+o],a=[this.ringsDataMatrix[l[0]],this.ringsDataMatrix[l[1]],this.ringsDataMatrix[l[2]]];var g=this.check3nodeRingsClear(r,a,l);if(e=e.concat(g),0!=g.length&&(i=g[0].split(":"),n=this.ringsDataMatrix[i[0]][i[1]],this.effects.showLaser(o+3,n),t++),-1!=(l=[0,4,8]).indexOf(s)){a=[this.ringsDataMatrix[0],this.ringsDataMatrix[4],this.ringsDataMatrix[8]];var f=this.check3nodeRingsClear(r,a,l);e=e.concat(f),0!=f.length&&(i=f[0].split(":"),n=this.ringsDataMatrix[i[0]][i[1]],this.effects.showLaser(6,n),t++)}if(-1!=(l=[2,4,6]).indexOf(s)){a=[this.ringsDataMatrix[2],this.ringsDataMatrix[4],this.ringsDataMatrix[6]];var p=this.check3nodeRingsClear(r,a,l);e=e.concat(p),0!=p.length&&(i=p[0].split(":"),n=this.ringsDataMatrix[i[0]][i[1]],this.effects.showLaser(7,n),t++)}return[e,t]},check3nodeRingsClear:function(t,e,i){for(var n=[],s=0;s<3;s++){var c=t[s];if(0!=c&&-1==n.indexOf(c)){var o=0!=e[0].getElementNum(c),r=0!=e[1].getElementNum(c),a=0!=e[2].getElementNum(c);o&&r&&a&&n.push(c)}}for(var l=[],u=0;u<n.length;u++)for(var h=n[u],d=0;d<3;d++)for(var g=i[d],f=0;f<3;f++){this.ringsDataMatrix[g][f]==h&&l.push(g+":"+f)}return l},reset:function(){clearTimeout(this.clearEffectOverIntervalId),this.addData=[0,0,0],this.nodeAddRing.stopAllActions(),this.oldAddRingPos&&this.nodeAddRing.setPosition(this.oldAddRingPos),this.nodeAddRing.active=!1,this.ringsDataMatrix=[];for(var t=0;t<9;t++)this.ringsDataMatrix.push([0,0,0]);this.updateRingsMatrix(!0),this.effects&&this.effects.reset()}}),cc._RF.pop()},{gameConfig:"gameConfig"}],TipStrip:[function(t,e,i){"use strict";cc._RF.push(e,"3aaebzY9ZlJQI9toxc/PA/g","TipStrip"),cc.Class({extends:cc.Component,properties:{imgBG:cc.Node,tfTips:cc.Label},onLoad:function(){},showTips:function(t,e,i){this.imgBG.active=!0,this.tfTips.string=t;var n=this.node.width+this.imgBG.width;this.imgBG.x=-n,this.imgBG.y=e.y;var s=[];s.push(cc.moveTo(.5,e.x,e.y)),s.push(cc.delayTime(1.5)),s.push(cc.moveBy(.5,n,0)),s.push(cc.callFunc(this.hideTips.bind(this,i))),this.imgBG.stopAllActions(),this.imgBG.runAction(cc.sequence(s))},hideTips:function(t){this.imgBG.stopAllActions(),this.imgBG.active=!1,null!=t&&t()}}),cc._RF.pop()},{}],UiTools:[function(t,e,i){"use strict";cc._RF.push(e,"cc14aF9KQhJ+pIWN4VB0Ncu","UiTools");var n={getSpriteFrame:function(t,e){if(null==e){var i=new cc.SpriteFrame;return i.setTexture(cc.loader.getRes(t)),i}return cc.loader.getRes(e,cc.SpriteAtlas).getSpriteFrame(t)},createSpriteNode:function(t,e){var i=new cc.Node;return i.addComponent(cc.Sprite).spriteFrame=this.getSpriteFrame(t,e),i},setSpriteFrame:function(t,e,i){var n=t.getComponent(cc.Sprite),s=this.getSpriteFrame(e,i);null!=s?n.spriteFrame=s:console.log('setSpriteFrame:"{0}"--"{1}" no exist!'.format(i,e))},createPrefab:function(t){return cc.instantiate(cc.loader.getRes(t,cc.Prefab))},scaleClickRegion:function(t,e,i){var n=t.node;t.interactable=!1;var s=cc.instantiate(n);s.setPosition(0,0),s.scale=i||.8,s.opacity=1,s.parent=n;var c=t.zoomScale,o=t.duration;n.trigger=s;var r=function(){n.scaleState=0};s.on(cc.Node.EventType.TOUCH_START,function(){1!=n.scaleState&&n.scale<c&&(n.stopAllActions(),n.scaleState=1,n.runAction(cc.sequence(cc.scaleTo(o,c),cc.callFunc(r))))}),s.on(cc.Node.EventType.TOUCH_END,function(){-1!=n.scaleState&&n.scale>1&&(n.stopAllActions(),n.scaleState=-1,n.runAction(cc.sequence(cc.scaleTo(o,1),cc.callFunc(r)))),null!=e&&e()}),s.on(cc.Node.EventType.TOUCH_CANCEL,function(){-1!=n.scaleState&&n.scale>1&&(n.stopAllActions(),n.scaleState=-1,n.runAction(cc.sequence(cc.scaleTo(o,1),cc.callFunc(r))))})},createFrameAnimationNode:function(t){var e=null;t.pattern?e=this.getSpriteFrames(t.atlas,t.pattern,t.idxStart,t.idxEnd):e=cc.loader.getRes(t.atlas,cc.SpriteAtlas).getSpriteFrames();null!=t.idxFrameStart&&t.idxFrameStart>=0&&t.idxFrameStart<e.length&&(e=e.slice(t.idxFrameStart).concat(e.slice(0,t.idxFrameStart)));var i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=e[0];var n=i.addComponent(cc.Animation),s=cc.AnimationClip.createWithSpriteFrames(e,t.fps);if(s.name=t.clipName||"anim",n.addClip(s),t.loop)s.wrapMode=cc.WrapMode.Loop,n.play(s.name);else if(t.once){n.play(s.name);n.on("finished",function t(){i.parent=null,n.off("finished",t)})}return i},addOutline:function(t,e,i){if(t instanceof cc.Label&&(t=t.node),null!=t.getComponent(cc.Label)){var n=t.addComponent(cc.LabelOutline);n.color=e,n.width=i}else console.error("utils.ui.addOutline:is not label component")}};e.exports=n,cc._RF.pop()},{}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"44c4dEwCVlDKKA3Q2CtTGoh","Utils"),window.utils={exitGame:function(t){cc.sys.isNative?cc.sys.os==cc.sys.OS_IOS?jsb.reflection.callStaticMethod("AppController","exitGame"):jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","exitGame","()V"):null!=t&&cc.js.isString(t)?location.replace(t):location.reload()},formatD:function(t,e){for(var i=e.toString(),n=i.length;t>n;)i="0"+i,t--;return i},getUrlParams:function(){if(!cc.sys.isBrowser)return{};if(null==this.urlParams){this.urlParams={};var t=window.location.href.split("?");if(t.length>1){t=t[1].split("&");for(var e=0;e<t.length;++e){var i=t[e].split("=");this.urlParams[i[0]]=i[1]}}}return this.urlParams},randomInt:function(t,e){return Math.floor(t+Math.random()*(e-t+1))},random:function(t,e){return t+Math.random()*(e-t)},getStringFromTDArray:function(t,e,i){var n="";return cc.each(t,function(s,c){cc.each(s,function(t,i){n+=null==t?"":t.toString(),i<s.length-1&&(n+=e)},this),c<t.length-1&&(n+=i)},this),n},getTDArrayFromString:function(t,e,i){for(var n=[],s=t.split(i),c=0;c<s.length;c++){for(var o=[],r=s[c].split(e),a=0;a<r.length;a++){var l=r[a];o.push(""==l?null:parseInt(l))}n.push(o)}return n},splitNumber:function(t){var e=t.toString(),i=e.charAt(0);"-"==i||"+"==i?e=e.substr(1):i="";var n=e.split(".");if(n.length>1)return n[0]=utils.splitNumber(n[0]),i+n.join(".");for(n=[];e.length>3;)n.unshift(e.substr(e.length-3)),e=e.substr(0,e.length-3);return n.unshift(e),e=i+(e=n.join(","))},stringRepeat:function(t,e){for(var i=t;e>1;)--e,i+=t;return i},getDataFromExtend:function(t,e,i,n){var s=null,c=t.split(i);return cc.each(c,function(t){var i=t.split(n);i[0]==e&&(s=i[1])},this),s},getQueryFromObj:function(t){if(null==t)return null;var e=[];return cc.each(t,function(t,i){null!=t&&e.push("{0}={1}".format(i,t))}),e.join("&")}},String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"gm"),e)},String.prototype.format=function(t){var e=this;if(arguments.length<1)return e;var i=arguments;for(var n in i){var s=i[n];null!=s&&(e=e.replaceAll("\\{"+n+"\\}",s))}return e},Array.prototype.removeElement=function(t){var e=this.indexOf(t);if(-1!=e)return this.splice(e,1)},Array.prototype.getElementNum=function(t){for(var e=0,i=0;i<this.length;i++)this[i]==t&&e++;return e},cc.each=function(t,e,i){if(t)if(t instanceof Array){for(var n=0,s=t.length;n<s;n++)if(!1===e.call(i,t[n],n))return}else for(var c in t)if(!1===e.call(i,t[c],c))return},cc._RF.pop()},{}],chn:[function(t,e,i){"use strict";cc._RF.push(e,"be449gFmbFCo6EVGE6612gp","chn"),e.exports={defaultFont:"Microsoft YaHei",extend:{}},cc._RF.pop()},{}],effects:[function(t,e,i){"use strict";cc._RF.push(e,"8f546cMnMtCd5gJnPUMrAqH","effects");var n=t("res"),s=t("UiTools"),c=t("gameConfig");cc.Class({extends:cc.Component,properties:{ringsParticleLayer:cc.Node,imgLaserList:[cc.Node]},onLoad:function(){this.ringsParticleList=[],this.ringsParticlePool=new cc.NodePool},addRingsParticle:function(t,e){var i=null;(i=this.ringsParticlePool.size()>0?this.ringsParticlePool.get():s.createPrefab(n.RingsParticleSystem_Pre)).parent=this.ringsParticleLayer,i.setPosition(e),this.ringsParticleList.push(i);var o=i.getComponent(cc.ParticleSystem);o.startColor=c.ringsColorList[t],o.endColor=c.ringsColorList[t],o.resetSystem(),setTimeout(this.removeRingsParticle.bind(this,i),1e3)},removeRingsParticle:function(t){t.removeFromParent(),t.getComponent(cc.ParticleSystem).stopSystem(),this.ringsParticlePool.put(t),this.ringsParticleList.removeElement(t)},showLaser:function(t,e){var i=this.imgLaserList[t];i.scaleX=1,i.color=c.ringsColorList[e],i.active=!0;var n=[];n.push(cc.delayTime(.1)),n.push(cc.scaleTo(.1,.2,1)),n.push(cc.delayTime(.2)),n.push(cc.callFunc(function(){i.scaleX=1,i.active=!1},this)),i.stopAllActions(),i.runAction(cc.sequence(n))},reset:function(){var t=this.ringsParticleList.concat();cc.each(t,function(t){t&&this.removeRingsParticle(t)},this),this.ringsParticleList=[],cc.each(this.imgLaserList,function(t){t&&(t.stopAllActions(),t.active=!1)},this)}}),cc._RF.pop()},{UiTools:"UiTools",gameConfig:"gameConfig",res:"res"}],gameConfig:[function(t,e,i){"use strict";cc._RF.push(e,"7c9e04tGWhM35eNi0kqzWFF","gameConfig");var n={account:"HYS",changeNum:3,useColorNum:4,ringsColorList:[cc.color(255,255,255),cc.color(233,33,95),cc.color(111,255,0),cc.color(0,147,255),cc.color(45,223,223),cc.color(249,39,248),cc.color(150,85,239),cc.color(255,223,1),cc.color(255,98,1)]};e.exports=n,cc._RF.pop()},{}],game:[function(t,e,i){"use strict";cc._RF.push(e,"4eff1OSWcdGsKbl0X8DnAJb","game");var n=t("gameConfig"),s=t("RingsHandler");cc.Class({extends:cc.Component,properties:{ringsHandler:{default:null,type:s},tfScore:cc.Label,tfMaxScore:cc.Label,tfMultiple:cc.Label,tfChangeNum:cc.Label,stopLayer:cc.Node,overLayer:cc.Node},onLoad:function(){this.reset(),setTimeout(this.startGame.bind(this),.1);var t=cc.sys.localStorage.getItem(n.account+"GAME_MAX_SCORE");this.tfMaxScore.string=t||0,this.ringsHandler.setGameOverCallback(this.gameOver.bind(this))},startGame:function(){this.isGame=!0,n.useColorNum=4;var t=cc.sys.localStorage.getItem(n.account+"GAME_SCORE");if(null!=t){var e=parseInt(t),i=parseInt(cc.sys.localStorage.getItem(n.account+"GAME_MULTIPLE")),s=parseInt(cc.sys.localStorage.getItem(n.account+"GAME_CHANGE_NUM"));this.updateScore(e),this.updateMultiple(i),this.updateChangeNum(s);var c=cc.sys.localStorage.getItem(n.account+"GAME_NODES_DATA");this.ringsHandler.ringsDataMatrix=utils.getTDArrayFromString(c,",",";"),this.ringsHandler.updateRingsMatrix(!1);var o=cc.sys.localStorage.getItem(n.account+"GAME_ADD_NODE_DATA").split(",");this.ringsHandler.showNewAddNode(o),this.showStopLayer()}else this.ringsHandler.startGame(),this.updateChangeNum(n.changeNum);this.openTouch()},updateScore:function(t){this.scoreNum=t,this.tfScore.string=t;var e=cc.sys.localStorage.getItem(n.account+"GAME_MAX_SCORE");(null==e||parseInt(e)<t)&&(this.tfMaxScore.string=t,cc.sys.localStorage.setItem(n.account+"GAME_MAX_SCORE",t));var i=Math.floor(t/200);i=i>8?8:i,n.useColorNum=4+i,this.isGame&&cc.sys.localStorage.setItem(n.account+"GAME_SCORE",t)},updateMultiple:function(t){this.multipleNum=t,this.tfMultiple.string="×"+t,this.tfMultiple.node.active=t>1,this.isGame&&cc.sys.localStorage.setItem(n.account+"GAME_MULTIPLE",t)},updateChangeNum:function(t){this.changeNum=t,this.tfChangeNum.string=t,this.tfChangeNum.node.active=t>0,this.isGame&&cc.sys.localStorage.setItem(n.account+"GAME_CHANGE_NUM",t)},onChangeAddNode:function(){this.changeNum>0&&(this.ringsHandler.changeAddNode()&&this.updateChangeNum(this.changeNum-1))},clearRingsCB:function(t,e){0==t?this.updateMultiple(0):this.updateMultiple(this.multipleNum+e),this.updateScore(this.scoreNum+t*this.multipleNum),this.multipleNum>1&&this.shockScreen()},openTouch:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this)},closeTouch:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this)},checkHitNode:function(t,e){var i=t.getContentSize(),n=cc.rect(0,0,i.width,i.height);return cc.rectContainsPoint(n,t.convertToNodeSpace(e))},checkHitMatrix:function(t){for(var e=this.ringsHandler.nodeRingsMatrix,i=0;i<e.length;i++)if(this.checkHitNode(e[i],t))return i;return-1},onTouchBegan:function(t,e){if(!this.hitNode){var i=this.ringsHandler.nodeAddRing;this.hitNode=this.checkHitNode(i,t.getLocation())}return!0},onTouchMoved:function(t,e){this.hitNode&&this.ringsHandler.nodeAddRing.setPosition(t.getLocation().x-this.node.width/2,t.getLocation().y-this.node.height/2);return!0},onTouchEnded:function(t,e){if(this.hitNode){this.hitNode=!1;var i=this.checkHitMatrix(t.getLocation()),n=this.ringsHandler.addRingsToMatrix(i),s=this.ringsHandler.nodeAddRing,c=this.ringsHandler.oldAddRingPos;n?(s.setPosition(c),s.active=!1,this.ringsHandler.updateRingsMatrix(!1),this.clearIntervalId=setTimeout(this.ringsHandler.clearRings.bind(this.ringsHandler,this.clearRingsCB.bind(this)),200),this.nextIntervalId=setTimeout(this.ringsHandler.showNewAddNode.bind(this.ringsHandler,null),200)):s.runAction(cc.moveTo(.2,c.x,c.y))}return!0},shockScreen:function(){var t=[];t.push(cc.moveBy(.02,20,20)),t.push(cc.moveTo(.02,0,0)),t.push(cc.moveBy(.02,-20,-20)),t.push(cc.moveTo(.02,0,0)),this.node.runAction(cc.repeat(cc.sequence(t),5))},gameOver:function(){this.isGame=!1,this.overLayer.active=!0,this.closeTouch(),this.clearLocalStorage()},restart:function(){this.reset(),this.clearLocalStorage(),this.startGame()},showStopLayer:function(){this.stopLayer.active=!0},hideStopLayer:function(){this.stopLayer.active=!1},clearLocalStorage:function(){cc.sys.localStorage.removeItem(n.account+"GAME_SCORE"),cc.sys.localStorage.removeItem(n.account+"GAME_MULTIPLE"),cc.sys.localStorage.removeItem(n.account+"GAME_CHANGE_NUM"),cc.sys.localStorage.removeItem(n.account+"GAME_NODES_DATA"),cc.sys.localStorage.removeItem(n.account+"GAME_ADD_NODE_DATA")},reset:function(){this.isGame=!1,this.hitNode=!1,this.overLayer.active=!1,this.closeTouch(),this.updateScore(0),this.updateMultiple(0),this.updateChangeNum(0),this.hideStopLayer(),clearTimeout(this.clearIntervalId),clearTimeout(this.nextIntervalId),this.ringsHandler.reset()},onDestroy:function(){this.closeTouch()}}),cc._RF.pop()},{RingsHandler:"RingsHandler",gameConfig:"gameConfig"}],i18n:[function(t,e,i){"use strict";cc._RF.push(e,"350b2ajWyBEZpzKpG0Wnbgg","i18n");var n=new(cc.Class({setLang:function(e){var i="chn";null!=e&&(i=e=e.toLowerCase()),this.lang=t(i)},setLangExtend:function(e){this.lang.extend=t(e)},getTxt:function(t){return this.lang.hasOwnProperty(t)?this.lang[t]:this.lang.extend&&this.lang.extend.hasOwnProperty(t)?this.lang.extend[t]:""},getDefaultFont:function(){return this.lang.hasOwnProperty("defaultFont")?this.lang.defaultFont:"Microsoft YaHei"}}));n.setLang(),e.exports=n,cc._RF.pop()},{}],resLists:[function(t,e,i){"use strict";cc._RF.push(e,"8d70cDNqS9Gi7DMKEQFhC93","resLists");var n=t("res"),s=[[n.imgRingsParticle_png,n.entrySceneBG_jpg,n.gameBG_jpg],[n.ui_atlas],[n.tipStrip_Pre,n.RingsParticleSystem_Pre],[],[],[],[],[]];e.exports=s,cc._RF.pop()},{res:"res"}],resMgr:[function(t,e,i){"use strict";cc._RF.push(e,"ff0a3D98gBJ8J7naSqLy4w0","resMgr");var n=[cc.SpriteFrame,cc.SpriteAtlas,cc.Prefab,cc.LabelAtlas,cc.TextAsset,cc.AudioClip,cc.AnimationClip,cc.Font],s=new(cc.Class({load:function(t,e,i,n){var s=setTimeout(function(){n&&n()},12e4),c=this._addRes(t),o=0,r=c.length;c.forEach(function(t){var n=t[0],c=t[1];cc.loader.loadRes(n,c,function(t,c){null!=t&&console.log("load asset error:"+n+"msg:"+t),++o,e&&e(o/r),o===r&&(i&&i(),clearTimeout(s))}.bind(this))}.bind(this))},_addRes:function(t){var e=[];return t.forEach(function(t,i){var s=n[i];t.forEach(function(t){e.push([t,s])})}),e}}));e.exports=s,cc._RF.pop()},{}],res:[function(t,e,i){"use strict";cc._RF.push(e,"f547ck5ontG0rwcmX7tl6dk","res");e.exports={imgRingsParticle_png:"imgs/imgRingsParticle",entrySceneBG_jpg:"imgs/entryScene_bg",gameBG_jpg:"imgs/game_bg",tipStrip_Pre:"prefabs/TipStrip",RingsParticleSystem_Pre:"prefabs/RingsParticlesystem",ui_atlas:"atlas/ui"},cc._RF.pop()},{}]},{},["EntryScene","TipStrip","chn","i18n","res","resLists","resMgr","RingsHandler","effects","game","gameConfig","AGAudio","NodeTools","UiTools","Utils"]);